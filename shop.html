<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JoyCode Studios â€“ Shop</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="/manifest.json">
</head>
<body>
  <header>
    <h1>JoyCode Studios Shop</h1>
    <p>Buy the scroll. Respect the glitch.</p>
  </header>

  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="shop.html">Shop</a></li>
      <li><a href="https://github.com/OllieTheKingYT">Contact</a></li>
    </ul>
  </nav>

  <main>
    <section id="shop">
      <h2>Available Scrolls</h2>

      <!-- Paid Listing -->
      <div class="tool-card">
        <h3>CTRL + Unknown</h3>
        <p>A mysterious story scroll. Â£1.50 â€“ PDF only.</p>
        <button onclick="handlePurchase()">Buy Now</button>
        <p id="purchase-status"></p>
      </div>

      <!-- Free Listing: The Tour -->
      <div class="tool-card">
        <h3>The Tour</h3>
        <p>A short, imaginative scroll. Free download.</p>
        <a href="downloads/TheTour.pdf" download>Download PDF</a>
      </div>

      <!-- Free Listing: The Jungle Expedition -->
      <div class="tool-card">
        <h3>The Jungle Expedition</h3>
        <p>A playful adventure scroll. Free download.</p>
        <a href="downloads/TheJungleExpedition.pdf" download>Download PDF</a>
      </div>
    </section>
  </main>

  <footer>
    <p>Â© JoyCode Studios â€“ Scrolls built for creators</p>
  </footer>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-auth-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBk_k17IxDi2AJmDmN-iHzTV7CSOQO_VZo",
      authDomain: "joycode-studios.firebaseapp.com",
      projectId: "joycode-studios",
      storageBucket: "joycode-studios.appspot.com",
      messagingSenderId: "633743383003",
      appId: "1:633743383003:web:155a68ae785d38c2096ffe"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // ðŸ”’ Redirect to index.html if not logged in
    auth.onAuthStateChanged(user => {
      if (!user) {
        window.location.href = "index.html";
      }
    });

    // ðŸ›’ Placeholder payment logic
    function handlePurchase() {
      const status = document.getElementById("purchase-status");
      const paymentVerified = false; // Replace with real payment check

      if (paymentVerified) {
        window.location.href = "CTRL + Unknown.pdf";
      } else {
        status.textContent = "Payment required. Please complete checkout to access this file.";
      }
    }
  </script>
</body>
</html>